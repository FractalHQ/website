---
import { mapPosts } from '$data/posts/utils';
import PostCard from './PostCard.astro';
import type { tags } from '$data/tags';

interface Props {
    filter?: keyof typeof tags;
}

let posts = mapPosts(await Astro.glob('../../pages/posts/**/*.md'));

if (Astro.props.filter) {
    posts = posts.filter((post) => post.tag == Astro.props.filter);
}
---

<div class="posts">
    {posts.map((post) => <PostCard {post} />)}
</div>

<style lang="scss">
    .posts {
        display: flex;
        flex-wrap: wrap;
        align-items: stretch;

        gap: 22px;
        width: 100%;

        margin: 12px 0px;
    }
</style>
